{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <!-- Option 1: Include in HTML -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <title>Robots</title>
    <link rel="stylesheet" href="{% static 'css/style.css'%}?{% now 'U' %}">
    <link rel="stylesheet" href="{% static 'css/globals.css'%}?{% now 'U' %}" />
    <link rel="stylesheet" href="{% static 'css/styleguide.css'%}?{% now 'U' %}" />
    <title>Document</title>
</head>
<body class="container-fluid d-flex flex-column min-vh-100 overflow-hidden">  
    <header class="navbar navbar-expand-xxl navbar-light bg-light ">
    <!-- <div class="container"> -->
        <nav class="container-xxl flex-wrap flex-lg-nowrap">
            <div class="d-flex gap-2 mb-3 ">
                <button type="button" class="btn btn-outline-primary me-2">About</button>
                <button type="button" class="btn btn-outline-primary me-2">How to</button>
                <button type="button" class="btn btn-danger" >
                    <i class="bi bi-x-lg"></i>
                        <span>Reset Filters </span>
                </button>
            </div>
        </nav>
        <!-- </div> -->
    </header>
    <div class="row">
        <div class="col">
            <div class="row g-0 w-100">
                <div class="col">
                    <span class="h3">person</span>
                </div>
                <div class="col">
                    <span class="h3">robot</span>
                </div>
                <div class="col">
                    <span class="h3">answers</span>
                </div>
            </div>
        </div>
    </div>
    <div class="row row-cols-1 mx-5 gy-2 h-100 mb-4 ">
        
        <div class="col h-50">
            <div class="row gx-3 h-100">
                <div class="col">
                    <div class="row h-100 row-cols-1 gx-0  gy-3 " >
                        <div class="col p-0 h-25" id="chart-1">
                            <div class="filters" id="chart-container">
                            </div>
                            
                        </div>  

                        <div class="col filters h-25" id="chart-container1">
                        </div>

                        <div class="col filters h-25">
                            <span>education</span>
                        </div>
    
                        <div class="col filters h-25">
                            <span>experience</span>
                        </div>
                        
                    </div> 
                </div>
                <div class="col">
                    <div class="row row-cols-1 gy-3 gx-0 h-100 ">
                        <div class="col filters">
                            <span>hls</span>
                        </div>
                        <div class="col">
                                <div class="row gy-0 gx-3 h-100">
                                    <div class="col">
                                        <div class="filters h-100">
                                            <span>hls</span>
                                        </div>
                                        
                                    </div>
                                    <div class="col">
                                        <div class="filters h-100">
                                            <span>hls</span>
                                        </div>
                                        
                                    </div>
                                    <div class="col">
                                        <div class="filters h-100">
                                            <span>hls</span>
                                        </div>
                                        
                                    </div>

                                </div>
                            
                        </div>
                    </div> 
                </div>
                <div class="col">
                    <div class="row row-cols-1 gx-0 gy-3 h-100 ">
                        <div class="col ">
                            <div class="filters h-100">
                                <span>bla</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col h-50">
            <div class="row g-0 h-100">
                <div class="col">
                    <div class="filters h-100">
                    <span>hello</span>
                </div>
                </div>
            </div>
        </div>    
    </div>

    <script>
        const width = 640;
        const height = 400;
        const marginTop = 20;
        const marginRight = 20;
        const marginBottom = 30;
        const marginLeft = 40;


        let height1 = $("#chart-1").height();
        let width1 = $("#chart-1").width();
        console.log(height1, width1)

        // Declare the x (horizontal position) scale.
        const x = d3.scaleUtc()
            .domain([new Date("2023-01-01"), new Date("2024-01-01")])
            .range([marginLeft, width1 - marginRight]);

        // Declare the y (vertical position) scale.
        const y = d3.scaleLinear()
            .domain([0, 10])
            .range([height1, marginTop]);

        // Create the SVG container.
        const svg = d3.create("svg")
            .attr("viewBox", [0, 0, width1, height1])
            .attr("preserveAspectRatio", "none")

        // Add the x-axis.
        svg.append("g")
            .attr("transform", `translate(0,${height1 - marginBottom})`)
            .call(d3.axisBottom(x));

        // Add the y-axis.
        svg.append("g")
            .attr("transform", `translate(${marginLeft},0)`)
            .call(d3.axisLeft(y));

        // Append the SVG element.
        $("#chart-container").append(svg.node());
        // $(document).ready(function(){
        //     // set the dimensions and margins of the graph
        //     const margin = {top:5, right: 25, bottom:0, left: 20};
        //     //     width = 360 - margin.left - margin.right,
        //     //     height = 75 - margin.top - margin.bottom;
        //     let height = document.getElementById("chart-1").offsetHeight;
        //     let width = document.getElementById("chart-1").offsetWidth;
        //     console.log($("#chart-1").height())
        //     console.log(height, width)
        //     // append the svg object to the body of the page
        //     const svg = d3.select("#chart-container")
        //     .append("svg")
        //          .attr("height", height + margin.top + margin.bottom)
        //         .attr("width", width + margin.left + margin.right)
        //         //   .attr("viewBox", [0, -30, 160, 120])
        //     //     .attr('preserveAspectRatio', 'xMinYMin meet')
        //         // .attr("height", "100%")
        //      .append("g")
        //         .attr("transform", `translate(${margin.left},${margin.top})`)
        //     //     .attr("height", "100%")
        //         // .attr('preserveAspectRatio', 'xMinYMin meet')
        //         ;
            
        //     // get the data
        //     d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv").then( function(data) {
            
        //     // add the x Axis
        //     const x = d3.scaleLinear()
        //                 .domain([0, 100])
        //                 .range([0, width]);
        //     svg.append("g")
        //         .attr("transform", `translate(0, ${height})`)
        //         .call(d3.axisBottom(x));
            
        //     // add the y Axis
        //     const y = d3.scaleLinear()
        //                 .range([60, 0])
        //                 .domain([0, 0.01]);
        //     svg.append("g")
        //         .call(d3.axisLeft(y));
            
        //     // Compute kernel density estimation
        //     const kde = kernelDensityEstimator(kernelEpanechnikov(7), x.ticks(40))
        //     const density =  kde( data.map(function(d){  return d.price; }) )
            
        //     // Plot the area
        //     svg.append("path")
        //         .attr("class", "mypath")
        //         .datum(density)
        //         .attr("fill", "#69b3a2")
        //         .attr("opacity", ".8")
        //         .attr("stroke", "#000")
        //         .attr("stroke-width", 1)
        //         .attr("stroke-linejoin", "round")
        //         .attr("d",  d3.line()
        //             .curve(d3.curveBasis)
        //             .x(function(d) { return x(d[0]); })
        //             .y(function(d) { return y(d[1]); })
        //         );
            
        //     });
            
            
        //     // Function to compute density
        //     function kernelDensityEstimator(kernel, X) {
        //     return function(V) {
        //         return X.map(function(x) {
        //         return [x, d3.mean(V, function(v) { return kernel(x - v); })];
        //         });
        //     };
        //     }
        //     function kernelEpanechnikov(k) {
        //     return function(v) {
        //         return Math.abs(v /= k) <= 1 ? 0.75 * (1 - v * v) / k : 0;
        //     };
        //     }
        // });
        
        </script>

    
</body>
</html>